<mxfile host="app.diagrams.net" modified="2024-09-18T03:00:00.000Z" agent="5.0" etag="xxx" version="21.6.5" type="device">
  <diagram name="RPC核心组件关系" id="rpc-core-components">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- 标题 -->
        <mxCell id="title" value="Hadoop RPC框架核心组件关系图" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#2c3e50;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="350" height="40" as="geometry" />
        </mxCell>
        
        <!-- RPC类 - 统一入口 -->
        <mxCell id="rpc-class" value="RPC类" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="480" y="80" width="200" height="120" as="geometry" />
        </mxCell>
        
        <!-- RPC类功能 -->
        <mxCell id="rpc-functions" value="• 协议管理&#xa;• 版本控制&#xa;• 引擎配置&#xa;• getProtocolEngine()&#xa;• setProtocolEngine()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f4fd;strokeColor=#6c8ebf;fontSize=11;align=left;" vertex="1" parent="1">
          <mxGeometry x="490" y="110" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- RpcEngine接口 -->
        <mxCell id="rpcengine-interface" value="RpcEngine接口" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="200" y="250" width="200" height="120" as="geometry" />
        </mxCell>
        
        <!-- RpcEngine功能 -->
        <mxCell id="rpcengine-functions" value="• getProxy()&#xa;• getServer()&#xa;• 可插拔序列化&#xa;• 协议引擎抽象" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#d6b656;fontSize=11;align=left;" vertex="1" parent="1">
          <mxGeometry x="210" y="280" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- RpcEngine实现 -->
        <mxCell id="writable-engine" value="WritableRpcEngine" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="80" y="420" width="120" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="protobuf-engine" value="ProtobufRpcEngine" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="220" y="420" width="120" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="protobuf-engine2" value="ProtobufRpcEngine2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="420" width="120" height="40" as="geometry" />
        </mxCell>
        
        <!-- Client类 -->
        <mxCell id="client-class" value="Client类" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="750" y="250" width="200" height="120" as="geometry" />
        </mxCell>
        
        <!-- Client功能 -->
        <mxCell id="client-functions" value="• 连接池管理&#xa;• 异步调用&#xa;• 容错重试&#xa;• call()方法&#xa;• Connection管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#82b366;fontSize=11;align=left;" vertex="1" parent="1">
          <mxGeometry x="760" y="280" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Client内部组件 -->
        <mxCell id="call-class" value="Call内部类" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="680" y="420" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="connection-class" value="Connection内部类" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="800" y="420" width="120" height="40" as="geometry" />
        </mxCell>
        
        <!-- Server类 -->
        <mxCell id="server-class" value="Server类" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="480" y="500" width="200" height="120" as="geometry" />
        </mxCell>
        
        <!-- Server功能 -->
        <mxCell id="server-functions" value="• 多线程架构&#xa;• 高并发处理&#xa;• 资源管理&#xa;• 请求队列管理&#xa;• 响应处理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d79b00;fontSize=11;align=left;" vertex="1" parent="1">
          <mxGeometry x="490" y="530" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Server内部组件 -->
        <mxCell id="listener-thread" value="Listener线程" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="320" y="660" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="reader-thread" value="Reader线程池" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="420" y="660" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="handler-thread" value="Handler线程池" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="520" y="660" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="responder-thread" value="Responder线程" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="620" y="660" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="callqueue-manager" value="CallQueueManager" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="720" y="660" width="100" height="30" as="geometry" />
        </mxCell>
        
        <!-- 连接线 -->
        <defs>
          <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#2c3e50"/>
          </marker>
          <marker id="arrowhead-manage" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c"/>
          </marker>
          <marker id="arrowhead-use" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#27ae60"/>
          </marker>
          <marker id="arrowhead-impl" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#9b59b6"/>
          </marker>
        </defs>
        
        <!-- RPC到RpcEngine的管理关系 -->
        <line x1="520" y1="200" x2="350" y2="250" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-manage)"/>
        <text x="400" y="220" fill="#e74c3c" font-size="11">管理配置</text>
        
        <!-- RpcEngine到实现类的继承关系 -->
        <line x1="250" y1="370" x2="140" y2="420" stroke="#9b59b6" stroke-width="2" marker-end="url(#arrowhead-impl)"/>
        <line x1="280" y1="370" x2="280" y2="420" stroke="#9b59b6" stroke-width="2" marker-end="url(#arrowhead-impl)"/>
        <line x1="320" y1="370" x2="420" y2="420" stroke="#9b59b6" stroke-width="2" marker-end="url(#arrowhead-impl)"/>
        <text x="280" y="395" fill="#9b59b6" font-size="11">实现</text>
        
        <!-- RPC到Client的使用关系 -->
        <line x1="650" y1="140" x2="750" y2="280" stroke="#27ae60" stroke-width="2" marker-end="url(#arrowhead-use)"/>
        <text x="680" y="200" fill="#27ae60" font-size="11">创建使用</text>
        
        <!-- RpcEngine到Server的使用关系 -->
        <line x1="400" y1="310" x2="480" y2="500" stroke="#27ae60" stroke-width="2" marker-end="url(#arrowhead-use)"/>
        <text x="420" y="400" fill="#27ae60" font-size="11">创建服务器</text>
        
        <!-- Client内部组件连接 -->
        <line x1="800" y1="370" x2="730" y2="420" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
        <line x1="820" y1="370" x2="860" y2="420" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
        
        <!-- Server内部组件连接 -->
        <line x1="520" y1="620" x2="360" y2="660" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
        <line x1="540" y1="620" x2="460" y2="660" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
        <line x1="560" y1="620" x2="560" y2="660" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
        <line x1="580" y1="620" x2="660" y2="660" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
        <line x1="600" y1="620" x2="770" y2="660" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
        
        <!-- 图例 -->
        <rect x="50" y="50" width="200" height="120" rx="5" fill="#f8f9fa" stroke="#dee2e6"/>
        <text x="60" y="70" font-size="14" font-weight="bold" fill="#2c3e50">图例说明</text>
        
        <line x1="70" y1="90" x2="100" y2="90" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-manage)"/>
        <text x="110" y="95" font-size="11" fill="#2c3e50">管理配置</text>
        
        <line x1="70" y1="110" x2="100" y2="110" stroke="#27ae60" stroke-width="2" marker-end="url(#arrowhead-use)"/>
        <text x="110" y="115" font-size="11" fill="#2c3e50">创建使用</text>
        
        <line x1="70" y1="130" x2="100" y2="130" stroke="#9b59b6" stroke-width="2" marker-end="url(#arrowhead-impl)"/>
        <text x="110" y="135" font-size="11" fill="#2c3e50">接口实现</text>
        
        <line x1="70" y1="150" x2="100" y2="150" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
        <text x="110" y="155" font-size="11" fill="#2c3e50">包含关系</text>
        
        <!-- 组件说明 -->
        <text x="850" y="50" font-size="12" fill="#2c3e50">🔵 统一入口</text>
        <text x="850" y="70" font-size="12" fill="#2c3e50">🟡 可插拔接口</text>
        <text x="850" y="90" font-size="12" fill="#2c3e50">🟢 客户端核心</text>
        <text x="850" y="110" font-size="12" fill="#2c3e50">🟠 服务端核心</text>
        <text x="850" y="130" font-size="12" fill="#2c3e50">🟣 内部组件</text>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
