<?xml version="1.0" encoding="UTF-8"?>
<svg width="1100" height="750" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #2c3e50; }
      .subtitle { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; }
      .text { font-family: Arial, sans-serif; font-size: 12px; }
      .small-text { font-family: Arial, sans-serif; font-size: 11px; }
      .rpc-class { fill: #dae8fc; stroke: #6c8ebf; }
      .rpc-functions { fill: #e8f4fd; stroke: #6c8ebf; }
      .rpcengine-interface { fill: #fff2cc; stroke: #d6b656; }
      .rpcengine-functions { fill: #fff8e1; stroke: #d6b656; }
      .engine-impl { fill: #f8cecc; stroke: #b85450; }
      .engine-current { fill: #d5e8d4; stroke: #82b366; }
      .client-class { fill: #d5e8d4; stroke: #82b366; }
      .client-functions { fill: #e8f5e8; stroke: #82b366; }
      .server-class { fill: #ffe6cc; stroke: #d79b00; }
      .server-functions { fill: #fff2cc; stroke: #d79b00; }
      .inner-component { fill: #e1d5e7; stroke: #9673a6; }
      .legend-box { fill: #f8f9fa; stroke: #dee2e6; }
    </style>
  </defs>
  
  <!-- æ ‡é¢˜ -->
  <text x="550" y="30" text-anchor="middle" class="title">Hadoop RPCæ¡†æ¶æ ¸å¿ƒç»„ä»¶å…³ç³»å›¾</text>
  
  <!-- RPCç±» -->
  <rect x="480" y="80" width="200" height="120" rx="10" class="rpc-class"/>
  <text x="580" y="100" text-anchor="middle" class="subtitle" fill="#6c8ebf">RPCç±»</text>
  
  <rect x="490" y="110" width="180" height="80" rx="5" class="rpc-functions"/>
  <text x="500" y="125" class="small-text">â€¢ åè®®ç®¡ç†</text>
  <text x="500" y="140" class="small-text">â€¢ ç‰ˆæœ¬æ§åˆ¶</text>
  <text x="500" y="155" class="small-text">â€¢ å¼•æ“é…ç½®</text>
  <text x="500" y="170" class="small-text">â€¢ getProtocolEngine()</text>
  <text x="500" y="185" class="small-text">â€¢ setProtocolEngine()</text>
  
  <!-- RpcEngineæ¥å£ -->
  <rect x="200" y="250" width="200" height="120" rx="10" class="rpcengine-interface"/>
  <text x="300" y="270" text-anchor="middle" class="subtitle" fill="#d6b656">RpcEngineæ¥å£</text>
  
  <rect x="210" y="280" width="180" height="80" rx="5" class="rpcengine-functions"/>
  <text x="220" y="295" class="small-text">â€¢ getProxy()</text>
  <text x="220" y="310" class="small-text">â€¢ getServer()</text>
  <text x="220" y="325" class="small-text">â€¢ å¯æ’æ‹”åºåˆ—åŒ–</text>
  <text x="220" y="340" class="small-text">â€¢ åè®®å¼•æ“æŠ½è±¡</text>
  
  <!-- RpcEngineå®ç° -->
  <rect x="80" y="420" width="120" height="40" rx="5" class="engine-impl"/>
  <text x="140" y="445" text-anchor="middle" class="text">WritableRpcEngine</text>
  
  <rect x="220" y="420" width="120" height="40" rx="5" class="engine-impl"/>
  <text x="280" y="445" text-anchor="middle" class="text">ProtobufRpcEngine</text>
  
  <rect x="360" y="420" width="120" height="40" rx="5" class="engine-current"/>
  <text x="420" y="445" text-anchor="middle" class="text">ProtobufRpcEngine2</text>
  
  <!-- Clientç±» -->
  <rect x="750" y="250" width="200" height="120" rx="10" class="client-class"/>
  <text x="850" y="270" text-anchor="middle" class="subtitle" fill="#82b366">Clientç±»</text>
  
  <rect x="760" y="280" width="180" height="80" rx="5" class="client-functions"/>
  <text x="770" y="295" class="small-text">â€¢ è¿æ¥æ± ç®¡ç†</text>
  <text x="770" y="310" class="small-text">â€¢ å¼‚æ­¥è°ƒç”¨</text>
  <text x="770" y="325" class="small-text">â€¢ å®¹é”™é‡è¯•</text>
  <text x="770" y="340" class="small-text">â€¢ call()æ–¹æ³•</text>
  <text x="770" y="355" class="small-text">â€¢ Connectionç®¡ç†</text>
  
  <!-- Clientå†…éƒ¨ç»„ä»¶ -->
  <rect x="680" y="420" width="100" height="40" rx="5" class="inner-component"/>
  <text x="730" y="445" text-anchor="middle" class="text">Callå†…éƒ¨ç±»</text>
  
  <rect x="800" y="420" width="120" height="40" rx="5" class="inner-component"/>
  <text x="860" y="445" text-anchor="middle" class="text">Connectionå†…éƒ¨ç±»</text>
  
  <!-- Serverç±» -->
  <rect x="480" y="500" width="200" height="120" rx="10" class="server-class"/>
  <text x="580" y="520" text-anchor="middle" class="subtitle" fill="#d79b00">Serverç±»</text>
  
  <rect x="490" y="530" width="180" height="80" rx="5" class="server-functions"/>
  <text x="500" y="545" class="small-text">â€¢ å¤šçº¿ç¨‹æ¶æ„</text>
  <text x="500" y="560" class="small-text">â€¢ é«˜å¹¶å‘å¤„ç†</text>
  <text x="500" y="575" class="small-text">â€¢ èµ„æºç®¡ç†</text>
  <text x="500" y="590" class="small-text">â€¢ è¯·æ±‚é˜Ÿåˆ—ç®¡ç†</text>
  <text x="500" y="605" class="small-text">â€¢ å“åº”å¤„ç†</text>
  
  <!-- Serverå†…éƒ¨ç»„ä»¶ -->
  <rect x="320" y="660" width="80" height="30" rx="3" class="inner-component"/>
  <text x="360" y="680" text-anchor="middle" class="small-text">Listenerçº¿ç¨‹</text>
  
  <rect x="420" y="660" width="80" height="30" rx="3" class="inner-component"/>
  <text x="460" y="680" text-anchor="middle" class="small-text">Readerçº¿ç¨‹æ± </text>
  
  <rect x="520" y="660" width="80" height="30" rx="3" class="inner-component"/>
  <text x="560" y="680" text-anchor="middle" class="small-text">Handlerçº¿ç¨‹æ± </text>
  
  <rect x="620" y="660" width="80" height="30" rx="3" class="inner-component"/>
  <text x="660" y="680" text-anchor="middle" class="small-text">Responderçº¿ç¨‹</text>
  
  <rect x="720" y="660" width="100" height="30" rx="3" class="inner-component"/>
  <text x="770" y="680" text-anchor="middle" class="small-text">CallQueueManager</text>
  
  <!-- è¿æ¥çº¿ -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2c3e50"/>
    </marker>
    <marker id="arrowhead-manage" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c"/>
    </marker>
    <marker id="arrowhead-use" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#27ae60"/>
    </marker>
    <marker id="arrowhead-impl" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#9b59b6"/>
    </marker>
  </defs>
  
  <!-- RPCåˆ°RpcEngineçš„ç®¡ç†å…³ç³» -->
  <line x1="520" y1="200" x2="350" y2="250" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-manage)"/>
  <text x="400" y="220" fill="#e74c3c" class="small-text">ç®¡ç†é…ç½®</text>
  
  <!-- RpcEngineåˆ°å®ç°ç±»çš„ç»§æ‰¿å…³ç³» -->
  <line x1="250" y1="370" x2="140" y2="420" stroke="#9b59b6" stroke-width="2" marker-end="url(#arrowhead-impl)"/>
  <line x1="280" y1="370" x2="280" y2="420" stroke="#9b59b6" stroke-width="2" marker-end="url(#arrowhead-impl)"/>
  <line x1="320" y1="370" x2="420" y2="420" stroke="#9b59b6" stroke-width="2" marker-end="url(#arrowhead-impl)"/>
  <text x="280" y="395" fill="#9b59b6" class="small-text">å®ç°</text>
  
  <!-- RPCåˆ°Clientçš„ä½¿ç”¨å…³ç³» -->
  <line x1="650" y1="140" x2="750" y2="280" stroke="#27ae60" stroke-width="2" marker-end="url(#arrowhead-use)"/>
  <text x="680" y="200" fill="#27ae60" class="small-text">åˆ›å»ºä½¿ç”¨</text>
  
  <!-- RpcEngineåˆ°Serverçš„ä½¿ç”¨å…³ç³» -->
  <line x1="400" y1="310" x2="480" y2="500" stroke="#27ae60" stroke-width="2" marker-end="url(#arrowhead-use)"/>
  <text x="420" y="400" fill="#27ae60" class="small-text">åˆ›å»ºæœåŠ¡å™¨</text>
  
  <!-- Clientå†…éƒ¨ç»„ä»¶è¿æ¥ -->
  <line x1="800" y1="370" x2="730" y2="420" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="820" y1="370" x2="860" y2="420" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- Serverå†…éƒ¨ç»„ä»¶è¿æ¥ -->
  <line x1="520" y1="620" x2="360" y2="660" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="540" y1="620" x2="460" y2="660" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="560" y1="620" x2="560" y2="660" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="580" y1="620" x2="660" y2="660" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="600" y1="620" x2="770" y2="660" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- å›¾ä¾‹ -->
  <rect x="50" y="50" width="200" height="120" rx="5" class="legend-box"/>
  <text x="60" y="70" class="subtitle" fill="#2c3e50">å›¾ä¾‹è¯´æ˜</text>
  
  <line x1="70" y1="90" x2="100" y2="90" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-manage)"/>
  <text x="110" y="95" class="small-text" fill="#2c3e50">ç®¡ç†é…ç½®</text>
  
  <line x1="70" y1="110" x2="100" y2="110" stroke="#27ae60" stroke-width="2" marker-end="url(#arrowhead-use)"/>
  <text x="110" y="115" class="small-text" fill="#2c3e50">åˆ›å»ºä½¿ç”¨</text>
  
  <line x1="70" y1="130" x2="100" y2="130" stroke="#9b59b6" stroke-width="2" marker-end="url(#arrowhead-impl)"/>
  <text x="110" y="135" class="small-text" fill="#2c3e50">æ¥å£å®ç°</text>
  
  <line x1="70" y1="150" x2="100" y2="150" stroke="#2c3e50" stroke-width="1" marker-end="url(#arrowhead)"/>
  <text x="110" y="155" class="small-text" fill="#2c3e50">åŒ…å«å…³ç³»</text>
  
  <!-- ç»„ä»¶è¯´æ˜ -->
  <text x="850" y="50" class="text" fill="#2c3e50">ğŸ”µ ç»Ÿä¸€å…¥å£</text>
  <text x="850" y="70" class="text" fill="#2c3e50">ğŸŸ¡ å¯æ’æ‹”æ¥å£</text>
  <text x="850" y="90" class="text" fill="#2c3e50">ğŸŸ¢ å®¢æˆ·ç«¯æ ¸å¿ƒ</text>
  <text x="850" y="110" class="text" fill="#2c3e50">ğŸŸ  æœåŠ¡ç«¯æ ¸å¿ƒ</text>
  <text x="850" y="130" class="text" fill="#2c3e50">ğŸŸ£ å†…éƒ¨ç»„ä»¶</text>
  
</svg>
