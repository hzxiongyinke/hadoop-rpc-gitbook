<?xml version="1.0" encoding="UTF-8"?>
<svg width="1100" height="750" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #2c3e50; }
      .subtitle { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; }
      .text { font-family: Arial, sans-serif; font-size: 12px; }
      .small-text { font-family: Arial, sans-serif; font-size: 11px; }
      .client-area { fill: #e1d5e7; stroke: #9673a6; fill-opacity: 0.3; }
      .client-box { fill: #f3e5f5; stroke: #9673a6; }
      .listener-thread { fill: #dae8fc; stroke: #6c8ebf; fill-opacity: 0.3; }
      .listener-func { fill: #e8f4fd; stroke: #6c8ebf; }
      .reader-pool { fill: #d5e8d4; stroke: #82b366; fill-opacity: 0.3; }
      .reader-box { fill: #e8f5e8; stroke: #82b366; }
      .connection-manager { fill: #fff2cc; stroke: #d6b656; fill-opacity: 0.3; }
      .conn-func { fill: #fff8e1; stroke: #d6b656; }
      .callqueue-manager { fill: #f8cecc; stroke: #b85450; fill-opacity: 0.3; }
      .queue-box { fill: #fce4ec; stroke: #b85450; }
      .handler-pool { fill: #ffe6cc; stroke: #d79b00; fill-opacity: 0.3; }
      .handler-box { fill: #fff2cc; stroke: #d79b00; }
      .responder-thread { fill: #e1d5e7; stroke: #9673a6; fill-opacity: 0.3; }
      .responder-func { fill: #f3e5f5; stroke: #9673a6; }
      .async-area { fill: #d5e8d4; stroke: #82b366; fill-opacity: 0.3; }
      .async-box { fill: #e8f5e8; stroke: #82b366; }
    </style>
  </defs>
  
  <!-- æ ‡é¢˜ -->
  <text x="550" y="30" text-anchor="middle" class="title">Serverå¤šçº¿ç¨‹æ¶æ„è®¾è®¡</text>
  
  <!-- å®¢æˆ·ç«¯è¿æ¥åŒºåŸŸ -->
  <rect x="80" y="80" width="200" height="120" rx="10" class="client-area"/>
  <text x="180" y="100" text-anchor="middle" class="subtitle" fill="#9673a6">å®¢æˆ·ç«¯è¿æ¥</text>
  
  <rect x="100" y="110" width="60" height="25" rx="3" class="client-box"/>
  <text x="130" y="127" text-anchor="middle" class="small-text">Client 1</text>
  
  <rect x="180" y="110" width="60" height="25" rx="3" class="client-box"/>
  <text x="210" y="127" text-anchor="middle" class="small-text">Client 2</text>
  
  <rect x="100" y="145" width="60" height="25" rx="3" class="client-box"/>
  <text x="130" y="162" text-anchor="middle" class="small-text">Client 3</text>
  
  <rect x="180" y="145" width="60" height="25" rx="3" class="client-box"/>
  <text x="210" y="162" text-anchor="middle" class="small-text">...</text>
  
  <!-- Listenerçº¿ç¨‹ -->
  <rect x="350" y="80" width="180" height="120" rx="10" class="listener-thread"/>
  <text x="440" y="100" text-anchor="middle" class="subtitle" fill="#6c8ebf">Listenerçº¿ç¨‹</text>
  
  <rect x="360" y="110" width="80" height="25" rx="3" class="listener-func"/>
  <text x="400" y="127" text-anchor="middle" class="small-text">æ¥å—æ–°è¿æ¥</text>
  
  <rect x="450" y="110" width="70" height="25" rx="3" class="listener-func"/>
  <text x="485" y="127" text-anchor="middle" class="small-text">ServerSocketChannel</text>
  
  <rect x="360" y="145" width="80" height="25" rx="3" class="listener-func"/>
  <text x="400" y="162" text-anchor="middle" class="small-text">NIO Selector</text>
  
  <rect x="450" y="145" width="70" height="25" rx="3" class="listener-func"/>
  <text x="485" y="162" text-anchor="middle" class="small-text">åˆ†å‘è¿æ¥</text>
  
  <!-- Readerçº¿ç¨‹æ±  -->
  <rect x="580" y="80" width="200" height="120" rx="10" class="reader-pool"/>
  <text x="680" y="100" text-anchor="middle" class="subtitle" fill="#82b366">Readerçº¿ç¨‹æ± </text>
  
  <rect x="600" y="110" width="60" height="25" rx="3" class="reader-box"/>
  <text x="630" y="127" text-anchor="middle" class="small-text">Reader 1</text>
  
  <rect x="680" y="110" width="60" height="25" rx="3" class="reader-box"/>
  <text x="710" y="127" text-anchor="middle" class="small-text">Reader 2</text>
  
  <rect x="600" y="145" width="60" height="25" rx="3" class="reader-box"/>
  <text x="630" y="162" text-anchor="middle" class="small-text">Reader 3</text>
  
  <rect x="680" y="145" width="60" height="25" rx="3" class="reader-box"/>
  <text x="710" y="162" text-anchor="middle" class="small-text">Reader N</text>
  
  <!-- ConnectionManager -->
  <rect x="820" y="80" width="180" height="120" rx="10" class="connection-manager"/>
  <text x="910" y="100" text-anchor="middle" class="subtitle" fill="#d6b656">ConnectionManager</text>
  
  <rect x="830" y="110" width="70" height="25" rx="3" class="conn-func"/>
  <text x="865" y="127" text-anchor="middle" class="small-text">è¿æ¥è·Ÿè¸ª</text>
  
  <rect x="910" y="110" width="70" height="25" rx="3" class="conn-func"/>
  <text x="945" y="127" text-anchor="middle" class="small-text">è¶…æ—¶å¤„ç†</text>
  
  <rect x="830" y="145" width="70" height="25" rx="3" class="conn-func"/>
  <text x="865" y="162" text-anchor="middle" class="small-text">èµ„æºæ¸…ç†</text>
  
  <rect x="910" y="145" width="70" height="25" rx="3" class="conn-func"/>
  <text x="945" y="162" text-anchor="middle" class="small-text">è¿æ¥æ³¨å†Œ</text>
  
  <!-- CallQueueManager -->
  <rect x="350" y="250" width="300" height="100" rx="10" class="callqueue-manager"/>
  <text x="500" y="270" text-anchor="middle" class="subtitle" fill="#b85450">CallQueueManager</text>
  
  <rect x="370" y="280" width="70" height="25" rx="3" class="queue-box"/>
  <text x="405" y="297" text-anchor="middle" class="small-text">æ™®é€šé˜Ÿåˆ—</text>
  
  <rect x="450" y="280" width="80" height="25" rx="3" class="queue-box"/>
  <text x="490" y="297" text-anchor="middle" class="small-text">ä¼˜å…ˆçº§é˜Ÿåˆ—</text>
  
  <rect x="540" y="280" width="70" height="25" rx="3" class="queue-box"/>
  <text x="575" y="297" text-anchor="middle" class="small-text">å…¬å¹³é˜Ÿåˆ—</text>
  
  <rect x="450" y="315" width="80" height="25" rx="3" class="queue-box"/>
  <text x="490" y="332" text-anchor="middle" class="small-text">RpcScheduler</text>
  
  <!-- Handlerçº¿ç¨‹æ±  -->
  <rect x="80" y="400" width="300" height="120" rx="10" class="handler-pool"/>
  <text x="230" y="420" text-anchor="middle" class="subtitle" fill="#d79b00">Handlerçº¿ç¨‹æ± </text>
  
  <rect x="100" y="430" width="60" height="25" rx="3" class="handler-box"/>
  <text x="130" y="447" text-anchor="middle" class="small-text">Handler 1</text>
  
  <rect x="180" y="430" width="60" height="25" rx="3" class="handler-box"/>
  <text x="210" y="447" text-anchor="middle" class="small-text">Handler 2</text>
  
  <rect x="260" y="430" width="60" height="25" rx="3" class="handler-box"/>
  <text x="290" y="447" text-anchor="middle" class="small-text">Handler 3</text>
  
  <rect x="100" y="465" width="80" height="25" rx="3" class="handler-box"/>
  <text x="140" y="482" text-anchor="middle" class="small-text">å¤„ç†RPCè°ƒç”¨</text>
  
  <rect x="200" y="465" width="70" height="25" rx="3" class="handler-box"/>
  <text x="235" y="482" text-anchor="middle" class="small-text">æ–¹æ³•è°ƒç”¨</text>
  
  <rect x="290" y="465" width="70" height="25" rx="3" class="handler-box"/>
  <text x="325" y="482" text-anchor="middle" class="small-text">æŒ‡æ ‡æ›´æ–°</text>
  
  <!-- Responderçº¿ç¨‹ -->
  <rect x="450" y="400" width="200" height="120" rx="10" class="responder-thread"/>
  <text x="550" y="420" text-anchor="middle" class="subtitle" fill="#9673a6">Responderçº¿ç¨‹</text>
  
  <rect x="470" y="430" width="80" height="25" rx="3" class="responder-func"/>
  <text x="510" y="447" text-anchor="middle" class="small-text">NIO Selector</text>
  
  <rect x="560" y="430" width="80" height="25" rx="3" class="responder-func"/>
  <text x="600" y="447" text-anchor="middle" class="small-text">å†™æ“ä½œç®¡ç†</text>
  
  <rect x="470" y="465" width="70" height="25" rx="3" class="responder-func"/>
  <text x="505" y="482" text-anchor="middle" class="small-text">å“åº”å‘é€</text>
  
  <rect x="550" y="465" width="80" height="25" rx="3" class="responder-func"/>
  <text x="590" y="482" text-anchor="middle" class="small-text">ç¼“å†²åŒºç®¡ç†</text>
  
  <!-- å¼‚æ­¥å¤„ç†åŒºåŸŸ -->
  <rect x="720" y="400" width="280" height="120" rx="10" class="async-area"/>
  <text x="860" y="420" text-anchor="middle" class="subtitle" fill="#82b366">å¼‚æ­¥å¤„ç†æœºåˆ¶</text>
  
  <rect x="740" y="430" width="80" height="25" rx="3" class="async-box"/>
  <text x="780" y="447" text-anchor="middle" class="small-text">Async-Handler</text>
  
  <rect x="840" y="430" width="90" height="25" rx="3" class="async-box"/>
  <text x="885" y="447" text-anchor="middle" class="small-text">Async-Responder</text>
  
  <rect x="740" y="465" width="80" height="25" rx="3" class="async-box"/>
  <text x="780" y="482" text-anchor="middle" class="small-text">ResponseQueue</text>
  
  <rect x="840" y="465" width="90" height="25" rx="3" class="async-box"/>
  <text x="885" y="482" text-anchor="middle" class="small-text">nameserviceéš”ç¦»</text>
  
  <!-- æ•°æ®æµç®­å¤´ -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2c3e50"/>
    </marker>
    <marker id="arrowhead-data" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c"/>
    </marker>
    <marker id="arrowhead-control" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3498db"/>
    </marker>
  </defs>
  
  <!-- è¿æ¥æµç¨‹ -->
  <line x1="280" y1="140" x2="350" y2="140" stroke="#e74c3c" stroke-width="3" marker-end="url(#arrowhead-data)"/>
  <text x="290" y="135" fill="#e74c3c" class="small-text">æ–°è¿æ¥</text>
  
  <line x1="530" y1="140" x2="580" y2="140" stroke="#e74c3c" stroke-width="3" marker-end="url(#arrowhead-data)"/>
  <text x="540" y="135" fill="#e74c3c" class="small-text">åˆ†å‘</text>
  
  <line x1="680" y1="200" x2="680" y2="250" stroke="#e74c3c" stroke-width="3" marker-end="url(#arrowhead-data)"/>
  <text x="690" y="225" fill="#e74c3c" class="small-text">RPCè¯·æ±‚</text>
  
  <line x1="350" y1="300" x2="230" y2="400" stroke="#e74c3c" stroke-width="3" marker-end="url(#arrowhead-data)"/>
  <text x="270" y="350" fill="#e74c3c" class="small-text">å–å‡ºCall</text>
  
  <line x1="380" y1="460" x2="450" y2="460" stroke="#3498db" stroke-width="3" marker-end="url(#arrowhead-control)"/>
  <text x="390" y="455" fill="#3498db" class="small-text">å“åº”</text>
  
  <!-- ç®¡ç†è¿æ¥ -->
  <line x1="780" y1="140" x2="820" y2="140" stroke="#3498db" stroke-width="2" marker-end="url(#arrowhead-control)"/>
  <text x="785" y="135" fill="#3498db" class="small-text">ç®¡ç†</text>
  
  <!-- å¼‚æ­¥å¤„ç†è¿æ¥ -->
  <line x1="650" y1="300" x2="720" y2="400" stroke="#27ae60" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="670" y="350" fill="#27ae60" class="small-text">å¼‚æ­¥å¤„ç†</text>
  
  <!-- å¤„ç†æµç¨‹è¯´æ˜ -->
  <text x="80" y="580" class="subtitle" fill="#2c3e50">å¤„ç†æµç¨‹ï¼š</text>
  <text x="80" y="600" class="small-text" fill="#2c3e50">1. Listeneræ¥å—è¿æ¥ â†’ 2. Readerè¯»å–è¯·æ±‚ â†’ 3. è¯·æ±‚å…¥é˜Ÿåˆ— â†’ 4. Handlerå¤„ç† â†’ 5. Responderå‘é€å“åº”</text>
  
  <!-- æ€§èƒ½ç‰¹ç‚¹ -->
  <text x="80" y="640" class="subtitle" fill="#2c3e50">æ€§èƒ½ç‰¹ç‚¹ï¼š</text>
  <text x="80" y="660" class="small-text" fill="#2c3e50">â€¢ å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†  â€¢ NIOéé˜»å¡I/O  â€¢ å¯é…ç½®çº¿ç¨‹æ± å¤§å°  â€¢ æ™ºèƒ½é˜Ÿåˆ—è°ƒåº¦  â€¢ å¼‚æ­¥å“åº”æœºåˆ¶</text>
  
  <!-- çº¿ç¨‹ç±»å‹è¯´æ˜ -->
  <text x="80" y="700" class="text" fill="#2c3e50">ğŸ”µ æ¥æ”¶çº¿ç¨‹</text>
  <text x="200" y="700" class="text" fill="#2c3e50">ğŸŸ¢ è¯»å–çº¿ç¨‹</text>
  <text x="320" y="700" class="text" fill="#2c3e50">ğŸŸ¡ ç®¡ç†ç»„ä»¶</text>
  <text x="440" y="700" class="text" fill="#2c3e50">ğŸ”´ é˜Ÿåˆ—ç³»ç»Ÿ</text>
  <text x="560" y="700" class="text" fill="#2c3e50">ğŸŸ  å¤„ç†çº¿ç¨‹</text>
  <text x="680" y="700" class="text" fill="#2c3e50">ğŸŸ£ å“åº”çº¿ç¨‹</text>
  
</svg>
