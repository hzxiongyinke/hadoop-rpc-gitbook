<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #2c3e50; }
      .subtitle { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; }
      .text { font-family: Arial, sans-serif; font-size: 12px; }
      .small-text { font-family: Arial, sans-serif; font-size: 11px; }
      .client-stack { fill: #e1d5e7; stroke: #9673a6; fill-opacity: 0.3; }
      .server-stack { fill: #e1d5e7; stroke: #9673a6; fill-opacity: 0.3; }
      .app-layer { fill: #dae8fc; stroke: #6c8ebf; fill-opacity: 0.3; }
      .app-component { fill: #e8f4fd; stroke: #6c8ebf; }
      .engine-layer { fill: #d5e8d4; stroke: #82b366; fill-opacity: 0.3; }
      .engine-component { fill: #e8f5e8; stroke: #82b366; }
      .comm-layer { fill: #fff2cc; stroke: #d6b656; fill-opacity: 0.3; }
      .comm-component { fill: #fff8e1; stroke: #d6b656; }
      .security-layer { fill: #f8cecc; stroke: #b85450; fill-opacity: 0.3; }
      .security-component { fill: #fce4ec; stroke: #b85450; }
      .network-layer { fill: #ffe6cc; stroke: #d79b00; fill-opacity: 0.3; }
      .network-component { fill: #fff2cc; stroke: #d79b00; }
      .network-connection { fill: #e1d5e7; stroke: #9673a6; }
    </style>
  </defs>
  
  <!-- æ ‡é¢˜ -->
  <text x="600" y="30" text-anchor="middle" class="title">Hadoop RPCåè®®æ ˆåˆ†å±‚æ¶æ„</text>
  
  <!-- å®¢æˆ·ç«¯åè®®æ ˆ -->
  <rect x="80" y="80" width="400" height="600" rx="10" class="client-stack"/>
  <text x="280" y="100" text-anchor="middle" class="subtitle" fill="#9673a6">å®¢æˆ·ç«¯åè®®æ ˆ</text>
  
  <!-- å®¢æˆ·ç«¯åº”ç”¨å±‚ -->
  <rect x="100" y="120" width="360" height="80" rx="5" class="app-layer"/>
  <text x="280" y="140" text-anchor="middle" class="subtitle" fill="#6c8ebf">åº”ç”¨å±‚</text>
  
  <rect x="120" y="150" width="80" height="30" rx="3" class="app-component"/>
  <text x="160" y="168" text-anchor="middle" class="small-text">ä¸šåŠ¡ä»£ç </text>
  
  <rect x="220" y="150" width="80" height="30" rx="3" class="app-component"/>
  <text x="260" y="168" text-anchor="middle" class="small-text">RPCä»£ç†</text>
  
  <rect x="320" y="150" width="80" height="30" rx="3" class="app-component"/>
  <text x="360" y="168" text-anchor="middle" class="small-text">Invoker</text>
  
  <!-- å®¢æˆ·ç«¯åè®®å¼•æ“å±‚ -->
  <rect x="100" y="220" width="360" height="80" rx="5" class="engine-layer"/>
  <text x="280" y="240" text-anchor="middle" class="subtitle" fill="#82b366">åè®®å¼•æ“å±‚</text>
  
  <rect x="120" y="250" width="100" height="30" rx="3" class="engine-component"/>
  <text x="170" y="268" text-anchor="middle" class="small-text">RpcEngineæ¥å£</text>
  
  <rect x="240" y="250" width="120" height="30" rx="3" class="engine-component"/>
  <text x="300" y="268" text-anchor="middle" class="small-text">ProtobufRpcEngine2</text>
  
  <rect x="380" y="250" width="100" height="30" rx="3" class="engine-component"/>
  <text x="430" y="268" text-anchor="middle" class="small-text">WritableRpcEngine</text>
  
  <!-- å®¢æˆ·ç«¯é€šä¿¡å±‚ -->
  <rect x="100" y="320" width="360" height="120" rx="5" class="comm-layer"/>
  <text x="280" y="340" text-anchor="middle" class="subtitle" fill="#d6b656">é€šä¿¡å±‚</text>
  
  <rect x="120" y="350" width="80" height="30" rx="3" class="comm-component"/>
  <text x="160" y="368" text-anchor="middle" class="small-text">Clientç±»</text>
  
  <rect x="220" y="350" width="80" height="30" rx="3" class="comm-component"/>
  <text x="260" y="368" text-anchor="middle" class="small-text">ClientCache</text>
  
  <rect x="320" y="350" width="80" height="30" rx="3" class="comm-component"/>
  <text x="360" y="368" text-anchor="middle" class="small-text">Connection</text>
  
  <rect x="120" y="390" width="80" height="30" rx="3" class="comm-component"/>
  <text x="160" y="408" text-anchor="middle" class="small-text">ConnectionId</text>
  
  <rect x="220" y="390" width="80" height="30" rx="3" class="comm-component"/>
  <text x="260" y="408" text-anchor="middle" class="small-text">Callå¯¹è±¡</text>
  
  <rect x="320" y="390" width="120" height="30" rx="3" class="comm-component"/>
  <text x="380" y="408" text-anchor="middle" class="small-text">CompletableFuture</text>
  
  <!-- å®¢æˆ·ç«¯å®‰å…¨å±‚ -->
  <rect x="100" y="460" width="360" height="80" rx="5" class="security-layer"/>
  <text x="280" y="480" text-anchor="middle" class="subtitle" fill="#b85450">å®‰å…¨å±‚</text>
  
  <rect x="120" y="490" width="100" height="30" rx="3" class="security-component"/>
  <text x="170" y="508" text-anchor="middle" class="small-text">SaslRpcClient</text>
  
  <rect x="240" y="490" width="80" height="30" rx="3" class="security-component"/>
  <text x="280" y="508" text-anchor="middle" class="small-text">è®¤è¯åå•†</text>
  
  <rect x="340" y="490" width="80" height="30" rx="3" class="security-component"/>
  <text x="380" y="508" text-anchor="middle" class="small-text">Tokenç®¡ç†</text>
  
  <!-- å®¢æˆ·ç«¯ç½‘ç»œå±‚ -->
  <rect x="100" y="560" width="360" height="80" rx="5" class="network-layer"/>
  <text x="280" y="580" text-anchor="middle" class="subtitle" fill="#d79b00">ç½‘ç»œå±‚</text>
  
  <rect x="120" y="590" width="60" height="30" rx="3" class="network-component"/>
  <text x="150" y="608" text-anchor="middle" class="small-text">Socket</text>
  
  <rect x="200" y="590" width="60" height="30" rx="3" class="network-component"/>
  <text x="230" y="608" text-anchor="middle" class="small-text">NIO</text>
  
  <rect x="280" y="590" width="60" height="30" rx="3" class="network-component"/>
  <text x="310" y="608" text-anchor="middle" class="small-text">TCP/IP</text>
  
  <rect x="360" y="590" width="60" height="30" rx="3" class="network-component"/>
  <text x="390" y="608" text-anchor="middle" class="small-text">SSL/TLS</text>
  
  <!-- æœåŠ¡ç«¯åè®®æ ˆ -->
  <rect x="600" y="80" width="400" height="600" rx="10" class="server-stack"/>
  <text x="800" y="100" text-anchor="middle" class="subtitle" fill="#9673a6">æœåŠ¡ç«¯åè®®æ ˆ</text>
  
  <!-- æœåŠ¡ç«¯æœåŠ¡å®ç°å±‚ -->
  <rect x="620" y="120" width="360" height="80" rx="5" class="app-layer"/>
  <text x="800" y="140" text-anchor="middle" class="subtitle" fill="#6c8ebf">æœåŠ¡å®ç°å±‚</text>
  
  <rect x="640" y="150" width="80" height="30" rx="3" class="app-component"/>
  <text x="680" y="168" text-anchor="middle" class="small-text">NameNode</text>
  
  <rect x="740" y="150" width="80" height="30" rx="3" class="app-component"/>
  <text x="780" y="168" text-anchor="middle" class="small-text">DataNode</text>
  
  <rect x="840" y="150" width="120" height="30" rx="3" class="app-component"/>
  <text x="900" y="168" text-anchor="middle" class="small-text">ResourceManager</text>
  
  <!-- æœåŠ¡ç«¯åè®®å¤„ç†å±‚ -->
  <rect x="620" y="220" width="360" height="80" rx="5" class="engine-layer"/>
  <text x="800" y="240" text-anchor="middle" class="subtitle" fill="#82b366">åè®®å¤„ç†å±‚</text>
  
  <rect x="640" y="250" width="80" height="30" rx="3" class="engine-component"/>
  <text x="680" y="268" text-anchor="middle" class="small-text">RpcInvoker</text>
  
  <rect x="740" y="250" width="80" height="30" rx="3" class="engine-component"/>
  <text x="780" y="268" text-anchor="middle" class="small-text">Translator</text>
  
  <rect x="840" y="250" width="100" height="30" rx="3" class="engine-component"/>
  <text x="890" y="268" text-anchor="middle" class="small-text">åºåˆ—åŒ–å¤„ç†</text>
  
  <!-- æœåŠ¡ç«¯è¯·æ±‚å¤„ç†å±‚ -->
  <rect x="620" y="320" width="360" height="120" rx="5" class="comm-layer"/>
  <text x="800" y="340" text-anchor="middle" class="subtitle" fill="#d6b656">è¯·æ±‚å¤„ç†å±‚</text>
  
  <rect x="640" y="350" width="80" height="30" rx="3" class="comm-component"/>
  <text x="680" y="368" text-anchor="middle" class="small-text">Serverç±»</text>
  
  <rect x="740" y="350" width="100" height="30" rx="3" class="comm-component"/>
  <text x="790" y="368" text-anchor="middle" class="small-text">Handlerçº¿ç¨‹æ± </text>
  
  <rect x="860" y="350" width="80" height="30" rx="3" class="comm-component"/>
  <text x="900" y="368" text-anchor="middle" class="small-text">Responder</text>
  
  <rect x="640" y="390" width="120" height="30" rx="3" class="comm-component"/>
  <text x="700" y="408" text-anchor="middle" class="small-text">CallQueueManager</text>
  
  <rect x="780" y="390" width="100" height="30" rx="3" class="comm-component"/>
  <text x="830" y="408" text-anchor="middle" class="small-text">RpcScheduler</text>
  
  <!-- æœåŠ¡ç«¯è¿æ¥ç®¡ç†å±‚ -->
  <rect x="620" y="460" width="360" height="80" rx="5" class="security-layer"/>
  <text x="800" y="480" text-anchor="middle" class="subtitle" fill="#b85450">è¿æ¥ç®¡ç†å±‚</text>
  
  <rect x="640" y="490" width="80" height="30" rx="3" class="security-component"/>
  <text x="680" y="508" text-anchor="middle" class="small-text">Listener</text>
  
  <rect x="740" y="490" width="100" height="30" rx="3" class="security-component"/>
  <text x="790" y="508" text-anchor="middle" class="small-text">Readerçº¿ç¨‹æ± </text>
  
  <rect x="860" y="490" width="120" height="30" rx="3" class="security-component"/>
  <text x="920" y="508" text-anchor="middle" class="small-text">ConnectionManager</text>
  
  <!-- æœåŠ¡ç«¯ç½‘ç»œå±‚ -->
  <rect x="620" y="560" width="360" height="80" rx="5" class="network-layer"/>
  <text x="800" y="580" text-anchor="middle" class="subtitle" fill="#d79b00">ç½‘ç»œå±‚</text>
  
  <rect x="640" y="590" width="80" height="30" rx="3" class="network-component"/>
  <text x="680" y="608" text-anchor="middle" class="small-text">ServerSocket</text>
  
  <rect x="740" y="590" width="80" height="30" rx="3" class="network-component"/>
  <text x="780" y="608" text-anchor="middle" class="small-text">Selector</text>
  
  <rect x="840" y="590" width="100" height="30" rx="3" class="network-component"/>
  <text x="890" y="608" text-anchor="middle" class="small-text">SocketChannel</text>
  
  <!-- ç½‘ç»œè¿æ¥ -->
  <rect x="520" y="350" width="60" height="200" rx="10" class="network-connection"/>
  <text x="550" y="440" text-anchor="middle" class="subtitle" fill="#9673a6">ç½‘ç»œ</text>
  <text x="550" y="460" text-anchor="middle" class="subtitle" fill="#9673a6">è¿æ¥</text>
  
  <!-- è¿æ¥çº¿ -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2c3e50"/>
    </marker>
    <marker id="arrowhead-data" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c"/>
    </marker>
  </defs>
  
  <!-- å®¢æˆ·ç«¯æ•°æ®æµ -->
  <line x1="280" y1="200" x2="280" y2="220" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-data)"/>
  <line x1="280" y1="300" x2="280" y2="320" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-data)"/>
  <line x1="280" y1="440" x2="280" y2="460" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-data)"/>
  <line x1="280" y1="540" x2="280" y2="560" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-data)"/>
  
  <!-- æœåŠ¡ç«¯æ•°æ®æµ -->
  <line x1="800" y1="200" x2="800" y2="220" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-data)"/>
  <line x1="800" y1="300" x2="800" y2="320" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-data)"/>
  <line x1="800" y1="440" x2="800" y2="460" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-data)"/>
  <line x1="800" y1="540" x2="800" y2="560" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-data)"/>
  
  <!-- ç½‘ç»œè¿æ¥çº¿ -->
  <line x1="480" y1="450" x2="520" y2="450" stroke="#9673a6" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="580" y1="450" x2="620" y2="450" stroke="#9673a6" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- å±‚æ¬¡è¯´æ˜ -->
  <text x="50" y="720" class="subtitle" fill="#2c3e50">åˆ†å±‚ç‰¹ç‚¹ï¼š</text>
  <text x="50" y="740" class="small-text" fill="#2c3e50">ğŸ”µ åº”ç”¨å±‚ï¼šä¸šåŠ¡é€»è¾‘å’Œä»£ç†  ğŸŸ¢ åè®®å±‚ï¼šåºåˆ—åŒ–å¼•æ“  ğŸŸ¡ é€šä¿¡å±‚ï¼šè¿æ¥ç®¡ç†  ğŸ”´ å®‰å…¨å±‚ï¼šè®¤è¯æˆæƒ  ğŸŸ  ç½‘ç»œå±‚ï¼šåº•å±‚ä¼ è¾“</text>
  
  <!-- ä¼˜åŠ¿è¯´æ˜ -->
  <text x="50" y="770" class="subtitle" fill="#2c3e50">è®¾è®¡ä¼˜åŠ¿ï¼š</text>
  <text x="50" y="790" class="small-text" fill="#2c3e50">â€¢ èŒè´£åˆ†ç¦»ï¼Œæ¨¡å—åŒ–è®¾è®¡  â€¢ å¯æ’æ‹”åè®®å¼•æ“  â€¢ å®Œæ•´çš„å®‰å…¨ä¿éšœ  â€¢ é«˜æ•ˆçš„ç½‘ç»œé€šä¿¡  â€¢ æ˜“äºæ‰©å±•å’Œç»´æŠ¤</text>
  
</svg>
